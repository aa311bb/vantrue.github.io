import{d as B,x as C,E as T,ad as z,b as l,z as O,A as M,U as L,af as N,D as U,y as p,M as j,ag as A,r as E,$ as D}from"./index-De6GvLOu.js";import{u as V}from"./use-expose-Oe1mBPbS.js";import{c as q,m as v,n as k,b as H,C as w,I as _}from"./index-CRmXhf89.js";import{P as $}from"./index-ChOJ9s9T.js";import{L as F}from"./index-DpB2-7h_.js";let d=0;function G(e){e?(d||document.body.classList.add("van-toast--unclickable"),d++):d&&(d--,d||document.body.classList.remove("van-toast--unclickable"))}const[J,c]=q("toast"),K=["show","overlay","teleport","transition","overlayClass","overlayStyle","closeOnClickOverlay","zIndex"],Q={icon:String,show:Boolean,type:v("text"),overlay:Boolean,message:k,iconSize:k,duration:H(2e3),position:v("middle"),teleport:[String,Object],wordBreak:String,className:w,iconPrefix:String,transition:v("van-fade"),loadingType:String,forbidClick:Boolean,overlayClass:w,overlayStyle:Object,closeOnClick:Boolean,closeOnClickOverlay:Boolean,zIndex:k};var R=B({name:J,props:Q,emits:["update:show"],setup(e,{emit:t,slots:n}){let i,o=!1;const r=()=>{const s=e.show&&e.forbidClick;o!==s&&(o=s,G(o))},u=s=>t("update:show",s),y=()=>{e.closeOnClick&&u(!1)},f=()=>clearTimeout(i),m=()=>{const{icon:s,type:a,iconSize:h,iconPrefix:P,loadingType:I}=e;if(s||a==="success"||a==="fail")return l(_,{name:s||a,size:h,class:c("icon"),classPrefix:P},null);if(a==="loading")return l(F,{class:c("loading"),size:h,type:I},null)},x=()=>{const{type:s,message:a}=e;if(n.message)return l("div",{class:c("text")},[n.message()]);if(L(a)&&a!=="")return s==="html"?l("div",{key:0,class:c("text"),innerHTML:String(a)},null):l("div",{class:c("text")},[a])};return C(()=>[e.show,e.forbidClick],r),C(()=>[e.show,e.type,e.message,e.duration],()=>{f(),e.show&&e.duration>0&&(i=setTimeout(()=>{u(!1)},e.duration))}),T(r),z(r),()=>l($,O({class:[c([e.position,e.wordBreak==="normal"?"break-normal":e.wordBreak,{[e.type]:!e.icon}]),e.className],lockScroll:!1,onClick:y,onClosed:f,"onUpdate:show":u},M(e,K)),{default:()=>[m(),x()]})}});function W(){const e=U({show:!1}),t=o=>{e.show=o},n=o=>{p(e,o,{transitionAppear:!0}),t(!0)},i=()=>t(!1);return V({open:n,close:i,toggle:t}),{open:n,close:i,state:e,toggle:t}}function X(e){const t=N(e),n=document.createElement("div");return document.body.appendChild(n),{instance:t.mount(n),unmount(){t.unmount(),document.body.removeChild(n)}}}const Y={icon:"",type:"text",message:"",className:"",overlay:!1,onClose:void 0,onOpened:void 0,duration:2e3,teleport:"body",iconSize:void 0,iconPrefix:void 0,position:"middle",transition:"van-fade",forbidClick:!1,loadingType:void 0,overlayClass:"",overlayStyle:void 0,closeOnClick:!1,closeOnClickOverlay:!1};let g=[],Z=!1,b=p({},Y);const ee=new Map;function S(e){return A(e)?e:{message:e}}function te(){const{instance:e,unmount:t}=X({setup(){const n=E(""),{open:i,state:o,close:r,toggle:u}=W(),y=()=>{},f=()=>l(R,O(o,{onClosed:y,"onUpdate:show":u}),null);return C(n,m=>{o.message=m}),D().render=f,{open:i,close:r,message:n}}});return e}function ne(){if(!g.length||Z){const e=te();g.push(e)}return g[g.length-1]}function oe(e={}){if(!j)return{};const t=ne(),n=S(e);return t.open(p({},b,ee.get(n.type||b.type),n)),t}const se=e=>t=>oe(p({type:e},S(t))),de=se("loading");export{oe as a,X as m,de as s,W as u};
