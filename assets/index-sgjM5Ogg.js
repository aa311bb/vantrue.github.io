import{c as _,B as V,t as k,w,n as N}from"./index-CRmXhf89.js";import{d as E,R as z,b,y as A,r as C,V as $,c as P,x as D,X as I,B as j,K as H,A as T,z as K,j as M,v as X}from"./index-De6GvLOu.js";import{c as L,C as Y}from"./index-mqVKvPC4.js";import{u as S}from"./use-expose-Oe1mBPbS.js";import{u as q}from"./use-lazy-render-gBwbLmzk.js";const[B,F]=_("collapse"),O=Symbol(B),G={border:k,accordion:Boolean,modelValue:{type:[String,Number,Array],default:""}};var J=E({name:B,props:G,emits:["change","update:modelValue"],setup(n,{emit:c,slots:l}){const{linkChildren:v,children:m}=z(O),o=e=>{c("change",e),c("update:modelValue",e)},p=(e,s)=>{const{accordion:r,modelValue:u}=n;o(r?e===u?"":e:s?u.concat(e):u.filter(h=>h!==e))},t=(e={})=>{if(n.accordion)return;typeof e=="boolean"&&(e={expanded:e});const{expanded:s,skipDisabled:r}=e,h=m.filter(d=>d.disabled&&r?d.expanded.value:s??!d.expanded.value).map(d=>d.itemName.value);o(h)},i=e=>{const{accordion:s,modelValue:r}=n;return s?r===e:r.includes(e)};return S({toggleAll:t}),v({toggle:p,isExpanded:i}),()=>{var e;return b("div",{class:[F(),{[V]:n.border}]},[(e=l.default)==null?void 0:e.call(l)])}}});const se=w(J),[Q,x]=_("collapse-item"),U=["icon","title","value","label","right-icon"],W=A({},L,{name:N,isLink:k,disabled:Boolean,readonly:Boolean,lazyRender:k});var Z=E({name:Q,props:W,setup(n,{slots:c}){const l=C(),v=C(),{parent:m,index:o}=$(O);if(!m)return;const p=P(()=>{var a;return(a=n.name)!=null?a:o.value}),t=P(()=>m.isExpanded(p.value)),i=C(t.value),e=q(()=>i.value||!n.lazyRender),s=()=>{t.value?l.value&&(l.value.style.height=""):i.value=!1};D(t,(a,g)=>{if(g===null)return;a&&(i.value=!0),(a?j:H)(()=>{if(!v.value||!l.value)return;const{offsetHeight:f}=v.value;if(f){const R=`${f}px`;l.value.style.height=a?"0":R,I(()=>{l.value&&(l.value.style.height=a?R:"0")})}else s()})});const r=(a=!t.value)=>{m.toggle(p.value,a)},u=()=>{!n.disabled&&!n.readonly&&r()},h=()=>{const{border:a,disabled:g,readonly:y}=n,f=T(n,Object.keys(L));return y&&(f.isLink=!1),(g||y)&&(f.clickable=!1),b(Y,K({role:"button",class:x("title",{disabled:g,expanded:t.value,borderless:!a}),"aria-expanded":String(t.value),onClick:u},f),T(c,U))},d=e(()=>{var a;return M(b("div",{ref:l,class:x("wrapper"),onTransitionend:s},[b("div",{ref:v,class:x("content")},[(a=c.default)==null?void 0:a.call(c)])]),[[X,i.value]])});return S({toggle:r,expanded:t,itemName:p}),()=>b("div",{class:[x({border:o.value&&n.border})]},[h(),d()])}});const re=w(Z);export{re as C,se as a};
